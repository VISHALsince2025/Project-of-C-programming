#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

/* Basic color codes */
#define RED     "\033[1;31m"
#define GREEN   "\033[1;32m"
#define YELLOW  "\033[1;33m"
#define CYAN    "\033[1;36m"
#define MAGENTA "\033[1;35m"
#define BLUE    "\033[1;34m"
#define RESET   "\033[0m"

/* String duplicate helper */
char *copy_string(const char *s) {
    char *p = malloc(strlen(s) + 1);
    if (p) strcpy(p, s);
    return p;
}

/* Read input line */
char *read_line() {
    char buffer[4096];
    fgets(buffer, sizeof(buffer), stdin);
    buffer[strcspn(buffer, "\n")] = 0;
    return copy_string(buffer);
}

/* Shuffle array */
void shuffle(int *arr, int n) {
    for (int i = n - 1; i > 0; i--) {
        int j = rand() % (i + 1);
        int t = arr[i];
        arr[i] = arr[j];
        arr[j] = t;
    }
}

/* Simple progress display */
void progress(int current, int total) {
    int width = 30;
    printf("[");
    int pos = (current * width) / total;
    for (int i = 0; i < width; i++) {
        printf(i <= pos ? "=" : " ");
    }
    printf("] %d%%\r", (current * 100) / total);
    fflush(stdout);
}

/* Question structure */
typedef struct {
    char *text;
    char **options;
    int option_count;
    int correct;
    int marks;
    char category[32];
    char difficulty[16];
} Question;

/* Question bank */
typedef struct {
    Question *questions;
    int count;
    int capacity;
} QuestionBank;

/* Result of one student */
typedef struct {
    char name[64];
    int *correct_flags;
    int given_count;
    int score;
    int total_marks;
    double time_taken;
} StudentResult;
